{% extends "base.html" %}
{% block content %}
<div class="overlay-container">
    <div class="box has-background-light is-fullwidth is-fullheigh">
        <table class="table has-background-light">
            <thead>
               
                <tr class="is-justify-content-center">
                    
                </tr>
                <tr>
                    <th>
                        <p id="overlay-name"></p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <p id="overlay-1"></p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p id="overlay-2"></p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p id="overlay-3"></p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p id="overlay-4"></p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p id="overlay-5"></p>
                    </td>
                </tr>
                
            </tbody>
            <tfoot>
                <tr>
                    <td>
                        <b class="is-size-4" id="overlay-ao"></b>
                    </td>
                </tr>
            </tfoot>
        </table>
        <button class="button is-small is-outlined is-danger is-fullwidth" onclick="toggleOverlay()">
            back
         </button>
    </div>
</div>
<div class="field is-left">
    <div class="buttons is-primary">
        <button onclick="history.back()" class="button is-outlined is-white">back</button>
        {%if current_user.is_authenticated %}
            <a class="button is-danger" href="{{url_for('main.enter_results', compname = compname, round = round, event = event)}}">edit</a>
        {% endif %}
    </div>
    
</div>

<div class="box has-background-light">
    <div class="table-container">
        <table class="table has-background-light is-fullwidth table-cell-border">
            <thead class="has-background-light`">
                <div class="box has-text-centered has-background-grey has-text-black">
                    <h1 class="is-size-4 is-size-6-mobile has-text-weight-bold">{{event}} - {{round}}. round</h1>
                </div>
                
                <tr class="is-size-7-mobile">
                    <th class="has-text-centered">  </th>
                    <th class="has-text-centered">Name</th>
                    <th class="has-text-centered is-hidden-mobile">1</th>
                    <th class="has-text-centered is-hidden-mobile">2</th>
                    <th class="has-text-centered is-hidden-mobile">3</th>
                    <th class="has-text-centered is-hidden-mobile">4</th>
                    <th class="has-text-centered is-hidden-mobile">5</th>
                    <th class="has-text-centered is-hidden-mobile">Best</th>
                    <th class="has-text-centered">Ao5</th>
                </tr>
            </thead>
            <tbody>
                {% for row in rows %}
                <tr class="is-size-6-mobile " >
                    {% if row[11] %}
                    <td class="has-text-centered has-background-success">
                    {% else %}
                    <td class="has-text-centered">
                       {% endif %} 
                        {{row[0]}}.
                    </td>
                    <td class="has-text-centered">
                        <button class="button is-link is-outlined is-fullwidth is-small" onclick="toggleOverlay('{{row[2]}}', '{{row[3]}}','{{row[4]}}', '{{row[5]}}', '{{row[6]}}', '{{row[7]}}', '{{row[9]}}', '{{row[0]}}')">
                            {{row[2]}}
                        </button>
                    </td>
                    <td class="has-text-centered is-hidden-mobile">
                        {{row[3]}}
                    </td>
                    <td class="has-text-centered is-hidden-mobile">

                        {{row[4]}}
                    </td>
                    <td class="has-text-centered is-hidden-mobile">
  
                        {{row[5]}}
                    </td>
                    <td class="has-text-centered is-hidden-mobile">
 
                        {{row[6]}}
                    </td>
                    <td class="has-text-centered is-hidden-mobile">
                        {{row[7]}}
                    </td>
                    <td class="has-text-centered is-hidden-mobile">
                        {{row[8]}}
                    </td>
                    <td class="has-text-centered">
                        {{row[9]}}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<style>
    .overlay-container {
        display: none;
        z-index: 1000;
        width: 85%;
        height: 50%;
        position: fixed;
        justify-content: center;
        align-items:center;

    }

    .overlay-content{
        z-index: 1000;
        font-size: 50px;
        position: absolute;
    }

</style>
<script>

    function toggleOverlay(name, first, second, third, fourth, fifth, ao5, pos) {
        console.log('button clicked')
        var overlay = document.getElementsByClassName("overlay-container")[0];
        console.log(overlay.style)
        if(overlay.style.display === "none" || !overlay.style.display){
            overlay.style.display = "flex"
            document.getElementById('overlay-name').innerHTML = pos+'. '+name
            document.getElementById('overlay-1').innerHTML = first
            document.getElementById('overlay-2').innerHTML = second
            document.getElementById('overlay-3').innerHTML = third
            document.getElementById('overlay-4').innerHTML = fourth
            document.getElementById('overlay-5').innerHTML = fifth
            document.getElementById('overlay-ao').innerHTML = ao5
            
        }
        else{
            console.log('False')
            overlay.style.display = "none"
        }
        
    }

</script>
{% endblock %}